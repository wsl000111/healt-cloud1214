(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{4012:function(t,e,n){"use strict";n("a3e7")},"5bee":function(t,e,n){},"991b":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-button",{staticClass:"msg-button",attrs:{type:"primary",disabled:t.isSend},on:{click:t.sendMsg}},[t._v(t._s(t.text))])},i=[],s={data:function(){return{text:"发送验证码",counter:0,timer:null,isSend:!1}},components:{},methods:{sendMsg:function(){var t=this;t.isSend||t.$emit("send",!0)},start:function(){var t=this;t.counter=60,t.countDown(),t.isSend=!0},countDown:function(){var t=this,e=this;e.timer=setInterval((function(){e.text="".concat(e.counter,"秒后重新发送"),e.counter--,console.log(e.counter),e.counter<0&&(e.text="重新发送",e.isSend=!1,clearInterval(t.timer))}),1e3)}}},a=s,c=(n("4012"),n("2877")),r=Object(c["a"])(a,o,i,!1,null,"f7177bac",null);e["a"]=r.exports},a3e7:function(t,e,n){},ee40:function(t,e,n){"use strict";n("5bee")},ff62:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("div",{staticClass:"content"},[n("div",{staticClass:"row"},[n("van-icon",{staticClass:"input-icon",attrs:{name:"phone"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.phoneNo,expression:"info.phoneNo"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号",maxlength:"20"},domProps:{value:t.info.phoneNo},on:{input:function(e){e.target.composing||t.$set(t.info,"phoneNo",e.target.value)}}})],1),n("div",{staticClass:"row"},[n("van-icon",{staticClass:"input-icon",attrs:{name:"chat"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.code,expression:"info.code"}],staticClass:"input_msg",attrs:{type:"text",placeholder:"验证码",maxlength:"20"},domProps:{value:t.info.code},on:{input:function(e){e.target.composing||t.$set(t.info,"code",e.target.value)}}}),n("div",{staticClass:"msgbox"},[n("msgCode",{ref:"msg",on:{send:t.sendSMS}})],1)],1),n("van-button",{staticClass:"submit_button",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登录")]),n("van-button",{staticClass:"register_button",attrs:{type:"info"},on:{click:t.onRegister}},[t._v("注册")])],1)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top"},[n("div",{staticClass:"bg"})])}],s=(n("e7e5"),n("d399")),a=n("5530"),c=(n("ac1f"),n("00b4"),n("991b")),r=n("2f62"),u={name:"loginView",data:function(){return{info:{phoneNo:"",code:""}}},components:{msgCode:c["a"]},methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["setToken"])),{},{onSubmit:function(){var t=this;return t.info.phoneNo&&/^[1][3-9][0-9]{9}$/.test(t.info.phoneNo)?""==t.info.code||6!=t.info.code.length?s["a"].fail("请填写6位数字验证码"):void t.$api.LoginView.login(t.info).then((function(e){200==e.code?(t.setToken(e.data),t.$router.push({name:"my"})):403==e.code&&s["a"].fail(e.msg)})):s["a"].fail("请填写正确的手机号码")},onRegister:function(){this.$router.push("/register")},sendSMS:function(){var t=this;this.info.phoneNo&&/^[1][3-9][0-9]{9}$/.test(this.info.phoneNo)?this.$api.LoginView.sendSMS({mobile:this.info.phoneNo}).then((function(e){200==e.code&&t.$refs.msg.start()})):s["a"].fail("手机号码不正确")}}),computed:{},watch:{}},l=u,f=(n("ee40"),n("2877")),d=Object(f["a"])(l,o,i,!1,null,"ba1f8402",null);e["default"]=d.exports}}]);